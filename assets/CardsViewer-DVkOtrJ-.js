import{j as e,r as m,D as L,a as P,g as z}from"./index-kU5mV01F.js";const U=({src:r,alt:l})=>e.jsx("div",{className:"card-image-container",children:e.jsx("img",{src:r,alt:l})}),V=({handleUnLoveCard:r,handleRemoveCard:l,onUpdate:c,action:x,data:p,...s})=>{var S;const u=["housing","industrial","coastal","commercial","land"],y=["سكني","صناعي","ساحلي","تجاري","ارض"],j=m.useContext(L).darkMode,i={...p,darkMode:j},[f,b]=m.useState(i.loved),v=m.useContext(L).loginState,R=v.token,[g,N]=m.useState(!1);function C(o,h){v.login?(b(o),P({headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json",Authorization:`Bearer ${R}`},method:`${o?"post":"get"}`,baseURL:"https://app.having.market/api/",url:`${o?"fav":"delfav/"+h}`,data:{task_id:`${h}`}}).then(t=>{}).catch(t=>{})):alert("u are not loged in")}function A(o){window.location=o}function _(o){const h=o.target.tagName.toLowerCase();h==="i"||h==="a"||h==="button"?console.log("clicked: ",h):(s.onSelect(i),document.querySelector(".card-viewer").scrollTo({top:0}))}const k=o=>{navigator.clipboard.writeText(o).then(()=>{alert("Phone number copied to clipboard!")}).catch(h=>{console.error("Failed to copy: ",h)})},T=(o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))(((S=i.payment)==null?void 0:S.price)||0);return e.jsxs("div",{className:`card card-ar ${i.darkMode&&"dark"} 
      ${s.selectedIndex===i.id&&"selected"}`,onClick:o=>_(o),children:[i.img[0]?e.jsx(U,{src:`https://app.having.market/public/images/${i.img[0].img_name}`,alt:"Card image"}):null,e.jsxs("div",{className:"card-data",children:[e.jsxs("h2",{children:[y[u.indexOf(i.type)],": ",s.activities]}),e.jsxs("div",{className:"card-text",children:[e.jsx("p",{className:"card-city",children:i.city.name}),e.jsx("p",{children:i.address})]}),e.jsx("h3",{children:T!==0?`${T} جنيه`:"لا يوجد سعر"}),e.jsxs("div",{className:"dep-features",children:[i.bedrooms?e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-bed"})," ",i.bedrooms]}):null,i.bathrooms?e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-bath"})," ",i.bathrooms]}):null,i.size?e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-ruler-combined"})," ",i.size,"م²"]}):null]}),e.jsxs("div",{className:"card-btns",children:[e.jsx("a",{href:`https://wa.me/+2${i.user.phone}`,className:"card-whatsapp-btn",children:e.jsx("i",{className:"fa-brands fa-whatsapp"})}),e.jsx("a",{className:"card-phone-btn",onClick:()=>{N(o=>!o),g||k(i.user.phone)},children:g?e.jsx("p",{style:{color:"white"},children:i.user.phone}):e.jsx("i",{className:"fa-solid fa-phone"})}),e.jsx("a",{className:"card-mail-btn",href:`mailto:+2${i.user.email}}`,children:e.jsx("i",{className:"fa-solid fa-envelope"})})]}),e.jsxs("div",{className:"card-icons icons-ar",children:[x==="fav"?e.jsx(e.Fragment,{children:e.jsx("i",{className:"fa-solid fa-heart",onClick:()=>r(i.id)})}):x==="tasks"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-xmark",onClick:()=>l(i)}),e.jsx("i",{className:"fa-solid fa-pen",onClick:c})]}):f?e.jsx("i",{className:"fa-solid fa-heart",onClick:()=>C(!1,i.id)}):e.jsx("i",{className:"fa-regular fa-heart",onClick:()=>C(!0,i.id)}),e.jsx("i",{className:"fa-solid fa-location-dot",onClick:()=>{A(i.location)}})]})]})]},s.key)};var I={exports:{}},B="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M=B,W=M;function D(){}function O(){}O.resetWarningCache=D;var q=function(){function r(x,p,s,u,y,j){if(j!==W){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}r.isRequired=r;function l(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:l,element:r,elementType:r,instanceOf:l,node:r,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:O,resetWarningCache:D};return c.PropTypes=c,c};I.exports=q();var H=I.exports;const $=z(H);function F({images:r}){const l="https://app.having.market/public/images/",[c,x]=m.useState(0),p=s=>{x(s)};return e.jsxs("div",{className:"imgs-slider",children:[e.jsx("div",{className:"imgs-main",children:e.jsx("div",{className:"img-container",children:e.jsx("img",{src:`${l}${r[c].img_name}`,alt:`Image ${c+1}`,className:"main-image"})})}),e.jsx("div",{className:"view-images",children:r.map((s,u)=>e.jsx("div",{className:`view-image ${c===u?"selected":""}`,onClick:()=>p(u),children:e.jsx("div",{className:"thumbnail-container",children:e.jsx("img",{src:`https://app.having.market/public/images/${r[u].img_name}`,alt:`Thumbnail ${u+1}`,className:"thumbnail-image"})})},s.img_name))})]})}F.propTypes={images:$.arrayOf($.shape({task_id:$.number.isRequired,img_name:$.string.isRequired})).isRequired};const G=m.forwardRef(({...r},l)=>{const c=["housing","industrial","coastal","commercial","land"],x=["سكني","صناعي","ساحلي","تجاري","ارض"],p=m.useContext(L).darkMode,s=l.current,[u,y]=m.useState(!1),j=i=>{navigator.clipboard.writeText(i).then(()=>{alert("Phone number copied to clipboard!")}).catch(f=>{console.error("Failed to copy: ",f)})};return s.img[0]&&console.log(s.img),e.jsx("div",{className:`my-view ${p&&"dark"}`,onClick:()=>{},children:s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dep-images",children:s.img[0]&&e.jsx(F,{images:s.img})}),e.jsxs("div",{className:"dep-details",children:[e.jsxs("div",{className:"dep-heading",children:[e.jsxs("h3",{children:[" ",e.jsx("i",{className:"fa-solid fa-map-location-dot"})," ",s.address]}),e.jsx("h5",{children:x[c.indexOf(s.type)]})]}),e.jsx("div",{className:"prices",children:e.jsxs("h3",{children:[" السعر: ",s.payment.price]})}),e.jsxs("div",{className:"features",children:[s.bedrooms?e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-bed"})," ",s.bedrooms]}):null,s.bathrooms?e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-bath"})," ",s.bathrooms]}):null,s.size?e.jsxs("span",{children:[e.jsx("i",{alt:"المساحة",className:"fa-solid fa-ruler-combined"})," ",s.size]}):null]}),e.jsxs("div",{className:"description",children:[e.jsx("h1",{children:"تفاصيل العقار"}),e.jsx("p",{children:s.description})]})]}),s.feature[0]&&(()=>{const i=Object.keys(s.feature[0]).filter(f=>s.feature[0][f]!==null&&f.startsWith("feature"));return e.jsxs("div",{className:"view-additional-features",children:[e.jsx("h1",{children:"مميزات اضافية"}),e.jsx("div",{className:"view-features",children:e.jsx("ul",{className:"feature-list",children:i.map((f,b)=>e.jsx("li",{children:s.feature[0][f]},b))})})]})})(),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-img",children:s.user.profile_pic?e.jsx("img",{src:`https://app.having.market/public/images/profile/${s.user.profile_pic}`,alt:""}):e.jsx("i",{className:"fa-solid fa-user"})}),e.jsxs("div",{className:"user-data",children:[e.jsx("h3",{className:"owner-name",children:s.user.name}),e.jsx("p",{children:s.user.email})]}),e.jsx("div",{className:"user-contact-btn",children:e.jsxs("div",{className:"card-btns",children:[e.jsx("a",{href:`https://wa.me/${s.user.phone}`,className:"card-whatsapp-btn",children:e.jsx("i",{className:"fa-brands fa-whatsapp"})}),e.jsx("a",{className:"card-phone-btn",onClick:()=>{y(i=>!i),u||j(s.user.phone)},children:u?s.user.phone:e.jsx("i",{className:"fa-solid fa-phone"})}),e.jsx("a",{className:"card-mail-btn",href:`mailto:${s.user.email}}`,children:e.jsx("i",{className:"fa-solid fa-envelope"})})]})})]})]})},"card-view")}),J=({priceRange:r,onSidebarStateClicked:l,action:c,onUpdate:x,token:p,filter:s,children:u,className:y=""})=>{const[j,i]=m.useState(),[f,b]=m.useState(!0),[v,R]=m.useState(!1),[g,N]=m.useState([]),C=m.useRef(null),A=[{type:"commercial",activities:[{en:"super market",ar:"سوبر ماركت"},{en:"pharmacy",ar:"صيدلية"},{en:"bakery",ar:"مخبز"},{en:"vegetables",ar:"خضروات"},{en:"another",ar:"آخر"}]},{type:"industrial",activities:[{en:"Building materials",ar:"مواد البناء"},{en:"Auto industry (cars)",ar:"صناعة السيارات"},{en:"Tobacco",ar:"التبغ"},{en:"Leather",ar:"الجلود"},{en:"Electronic industries",ar:"الصناعات الإلكترونية"},{en:"electrical",ar:"الكهربائية"},{en:"Chemical",ar:"الكيميائية"},{en:"Pharmaceutical",ar:"الصيدلانية"},{en:"Mechanical",ar:"الميكانيكية"},{en:"Delivery services",ar:"خدمات التوصيل"},{en:"Another activity",ar:"نشاط آخر"},{en:"without",ar:"بدون"}]},{type:"land",activities:[{en:"residential",ar:"سكني"},{en:"commercial",ar:"تجاري"},{en:"Administrative",ar:"إداري"},{en:"Entertaining",ar:"ترفيهي"},{en:"industrial",ar:"صناعي"},{en:"agricultural",ar:"زراعي"},{en:"Store",ar:"مخزن"},{en:"medical",ar:"طبي"},{en:"Usufruct right",ar:"حق الانتفاع"},{en:"coastal",ar:"ساحلي"}]},{type:"housing",activities:[{en:"Apartment",ar:"شقة"},{en:"Loft",ar:"لوفت"},{en:"Penthouse",ar:"بنتهاوس"},{en:"Villa",ar:"فيلا"},{en:"Town House",ar:"تاون هاوس"},{en:"Duplex",ar:"دوبلكس"},{en:"Twin Vill",ar:"فيلا ثؤام"},{en:"Roof",ar:"روف"},{en:"studio",ar:"ستوديو"}]},{type:"coastal",activities:[{en:"Chalet",ar:"شاليه"},{en:"Apartment",ar:"شقة"},{en:"Loft",ar:"لوفت"},{en:"Penthouse",ar:"بنتهاوس"},{en:"Villa",ar:"فيلا"},{en:"Town House",ar:"تاون هاوس"},{en:"Duplex",ar:"دوبلكس"},{en:"Twin Vill",ar:"فيلا ثؤام"},{en:"Roof",ar:"روف"}]}];function _(t,a){const n=A.find(d=>d.type===t);if(n){const d=n.activities.find(w=>w.en.toLowerCase()===a.toLowerCase());if(d)return d.ar}return null}m.useEffect(()=>{P({headers:{Authorization:`${p&&`Bearer ${p}`}`},method:"get",baseURL:"https://app.having.market/api/",url:c}).then(t=>{R(!0),N(t.data[0]),r([t.data[1],t.data[2]])}).catch(t=>{console.log(t)})},[c,p]),m.useEffect(()=>{v&&g.length>0&&k(g[0])},[g,v]);function k(t){i(t.id),C.current=t}function E(t){P({headers:{Authorization:`Bearer ${p}`},method:"GET",url:`https://app.having.market/api/delfav/${t}`}).then(a=>{console.log(a),a.status===200&&N(n=>(console.log("cards was: ",g),n.filter(d=>d.id!==t)))}).catch(a=>{console.log(a)})}function T(t){P.delete(`https://app.having.market/api/tasks/${t}`,{headers:{Authorization:`Bearer ${p}`}}).then(a=>{console.log(a),a.status===200&&N(n=>n.filter(d=>d.id!==t))}).catch(a=>{console.log(a)})}function S(t){x(t)}const h=c==="sell"||c==="rent"?((t,a)=>(console.log(a),t.filter(n=>{if(a.type&&n.type!==a.type||a.finishing&&n.finishing!==a.finishing)return!1;if(a.space[0]&&a.space[1]&&Array.isArray(a.space)){const[d,w]=a.space;if(parseInt(n.size)<d||parseInt(n.size)>w)return!1}if(a.bedrooms&&n.bedrooms!==a.bedrooms||a.bathrooms&&n.bathrooms!==a.bathrooms)return!1;if(a.price&&Array.isArray(a.price)&&n.payment){const[d,w]=a.price;if(n.payment.price<d||n.payment.price>w)return!1}return!(a.payment&&n.payment&&n.payment.payment!==a.payment||a.activities&&a.activities.length>0&&!a.activities.some(d=>n.activity.toLowerCase()===d.toLowerCase())||a.features&&a.features.length>0&&!a.features.every(d=>n.feature[0][d])||a.gover&&parseInt(n.gover.id)!==a.gover||a.city&&parseInt(n.city.id)!==a.city)})))(g,s):g;return m.useEffect(()=>{v&&h.length>0?b(!1):b(!0)},[v,h]),e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"empty-data",children:[e.jsx("h1",{children:" لا توجد عقارات ليتم عرضا هنا"}),c==="sell"||c==="rent"?e.jsx("div",{className:"show-sidebar",children:e.jsx("button",{onClick:l,children:e.jsx("i",{className:"fa-solid fa-filter"})})},"sidebar-btn"):null]}):e.jsxs("div",{className:`card-viewer ${y}`,children:[c==="sell"||c==="rent"?e.jsx("div",{className:"show-sidebar",children:e.jsx("button",{onClick:l,children:e.jsx("i",{className:"fa-solid fa-filter"})})},"sidebar-btn"):null,u,e.jsx("div",{className:"grid-container",children:h.map((t,a)=>{const n=_(t.type,t.activity);return e.jsx(V,{action:c,activities:n,data:t,onSelect:k,selectedIndex:j,onUpdate:()=>S(t),handleRemoveCard:()=>T(t.id),handleUnLoveCard:()=>E(t.id)},a)})}),j&&h.length>0?e.jsx(G,{ref:C}):null]})})};export{J as C};
